<div class="px-6 w-full">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="space-y-2">
      <div class="form-group">
        <label
          for="current_password"
          class="form-label inline-block pb-1 text-gray-700"
          >Aktualne hasło</label
        >
        <input
          autocomplete="current-password"
          type="password"
          id="current_password"
          name="current_password"
          formControlName="current_password"
          pPassword
          [ngClass]="
            (f['current_password'].invalid &&
              (f['current_password'].touched ||
                f['current_password'].dirty ||
                isSubmitted)) ||
            serverErrors.current_password
              ? 'border-red-600'
              : 'border-gray-300'
          "
          placeholder="Aktualne hasło"
        />
        <div
          *ngIf="
            f['current_password'].invalid &&
            (f['current_password'].touched ||
              f['current_password'].dirty ||
              isSubmitted)
          "
          class="text-red-600 font-semibold"
        >
          <div *ngIf="f['current_password'].errors?.['required']">
            Hasło jest wymagane!
          </div>
          <div *ngIf="f['current_password'].errors?.['minlength']">
            Hasło musi mieć co najmniej 8 znaków!
          </div>
        </div>
        <div
          *ngIf="serverErrors.current_password"
          class="text-red-600 font-semibold"
        >
          <div *ngFor="let current_password of serverErrors.current_password">
            {{ current_password }}
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="password" class="form-label inline-block pb-1 text-gray-700"
          >Nowe hasło</label
        >
        <input
          autocomplete="new-password"
          type="password"
          id="password"
          name="password"
          formControlName="password"
          pPassword
          [ngClass]="
            (f['password'].invalid &&
              (f['password'].touched || f['password'].dirty || isSubmitted)) ||
            serverErrors.password
              ? 'border-red-600'
              : 'border-gray-300'
          "
          placeholder="Nowe hasło"
        />
        <div
          *ngIf="
            f['password'].invalid &&
            (f['password'].touched || f['password'].dirty || isSubmitted)
          "
          class="text-red-600 font-semibold"
        >
          <div *ngIf="f['password'].errors?.['required']">
            Hasło jest wymagane!
          </div>
          <div *ngIf="f['password'].errors?.['minlength']">
            Hasło musi mieć co najmniej 8 znaków!
          </div>
        </div>
        <div *ngIf="serverErrors.password" class="text-red-600 font-semibold">
          <div *ngFor="let password of serverErrors.password">
            {{ password }}
          </div>
        </div>
      </div>
      <div class="form-group">
        <label
          for="password_confirmation"
          class="form-label inline-block pb-1 text-gray-700"
          >Potwierdź hasło</label
        >
        <input
          autocomplete="new-password"
          type="password"
          id="password_confirmation"
          name="password_confirmation"
          formControlName="password_confirmation"
          pPassword
          [ngClass]="
            f['password_confirmation'].invalid &&
            (f['password_confirmation'].touched ||
              f['password_confirmation'].dirty ||
              isSubmitted)
              ? 'border-red-600'
              : 'border-gray-300'
          "
          placeholder="Powtórz hasło"
        />
        <div
          *ngIf="
            (f['password_confirmation'].invalid ||
              form.errors?.confirmedPassword) &&
            (f['password_confirmation'].touched ||
              f['password_confirmation'].dirty ||
              isSubmitted)
          "
          class="text-red-600 font-semibold"
        >
          <div *ngIf="f['password_confirmation'].errors?.['required']">
            Potwierdzenie hasła jest wymagane!
          </div>
          <div *ngIf="form.errors?.confirmedPassword">
            Hasło i powtórzone hasło muszą być takie same!
          </div>
        </div>
      </div>

      <div class="w-full">
        <button
          class="w-full"
          pButton
          [loading]="loading"
          label="Aktualizuj"
          [disabled]="form.invalid || form.pristine"
        ></button>
      </div>
    </div>
  </form>
</div>
